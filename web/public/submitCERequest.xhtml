<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
     
    <h:head>
        <title>Code Enforcement Action Request</title>
         <h:outputStylesheet name="style.css" library="css"/>
         <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'/>

    </h:head>
    <h:body>
        <h:graphicImage name="cedbHeader.jpg" width="1030" styleClass="header"/>
        <div class="mainContainer">
            <h1>Turtle Creek Valley Code Enforcement Management System (CEMS)</h1>
            <h2>Code Enforcement Action Request</h2>
            <p>This form allows citizens and officials to Submit a request to the 
                Turtle Creek Valley Council of Governments code enforcement team
                to investigate a possible municipal code violation.
            </p>
            <p> 
                Requests submitted uhere are immediately sent to the code enforcement offical 
                handling cases in the selected municipality. Once the form has been submitted
                you will be issued a tracking number which can be used to monitor the status
                of your request at any time and to send notes to the code enforcement officials regarding
                your request.
            </p>
            <p>
                Please allow at least 1-2 business days for the team to 
                conduct an initial case investigation before following up with the 
                code enforcement team directly. Code enforcement officials will
                contact you and concerned parties directly during the investigation process.
                With your tracking number, you may login at anytime to view the status of your request.
            </p>
            <p>Pleae complete each section below to complete your request: </p>
            <hr />
            <h3>Section 1: Property Selection</h3>
            <f:view>
                 <h:messages globalOnly="true"></h:messages>
                
                <h:form id="actionRequestForm">
                    <fieldset>
                        
                        <p:inputText
                                id="addrPart"
                                size="20"
                                value="#{propSearchBean.addrPart}"/>
                            <h:commandButton
                                value="Search" id="propSearch"
                                action="#{propSearchBean.lookUpProperty}">
                                <f:ajax
                                    execute="addrPart"
                                    render="propTable testOutput"/>
                            </h:commandButton>    <br/>
                      <h:outputText
                          value="#{propSearchBean.addrPart}"
                          id="testOutput">
                          
                      </h:outputText>



                    </fieldset>
                    
                    
                    
                    <h:outputLabel for="muni" >
                        <h:outputText styleClass="uiLabel" value="Choose the municipality in which the concern exists" />
                    </h:outputLabel>
                    <p:selectOneMenu 
                            id="muni" 
                            value="#{actionRequestBean.muniID}">
                            
                        <f:selectItems value="#{muniMap.municipalityMap}"/>
                            
                    </p:selectOneMenu>
                    
                    <h3>Search by text in property Address</h3>


                      

                        <p:spacer height="15"></p:spacer>

                       
                        <h:outputText
                            id="addrOutput"
                            value="#{propSearchBean.addrPart}" />

                        <!--Display of properties from search-->
                        <h4>Search Results:</h4>
                        <p:dataTable
                            id="propTable"
                            var="prop"
                            value="#{propSearchBean.propList}"
                            selectionMode="single"
                            selection="#{propSearchBean.selectedProperty}"
                            rowKey="#{prop.propertyID}">
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Property ID" />
                                </f:facet>
                                <h:outputText value="#{prop.propertyID}"/>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Address" />
                                </f:facet>
                                <h:outputText value="#{prop.address}"/>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Property ID" />
                                </f:facet>
                                <h:outputText value="#{prop.borough}"/>
                            </p:column>
                        
                        
                        </p:dataTable>
                        
                        
                        

                    
                    
                    
                    <h:outputLabel for="manualAddress" >
                        <h:outputText value="Enter the address of the property of concern or describe its location " styleClass="uiLabel" />
                    </h:outputLabel>
                    <p:inputText id="manualAddress" value="#{actionRequestBean.form_addressOfConcern}" 
                                 style="width: 100%;" tabindex="0" required="false" styleClass="inputText"/>
                    <h:message for="manualAddress" showDetail="false" showSummary="true" 
                               warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
    
                    
                    <h:outputLabel for="violation" >
                        <h:outputText styleClass="uiLabel" value="Choose the category of concern from the list or select 'other' and explain your concern below" />
                    </h:outputLabel>
                    <p:selectOneListbox 
                            id="violation" 
                            style="width: 100%;"
                            value="#{actionRequestBean.violationTypeID}">
                            
                            <f:selectItems value="#{publicViolationSet.violationMap}"/>
                            
                    </p:selectOneListbox>


                    <h:outputLabel for="describeConcern" >
                        <h:outputText styleClass="uiLabel" value="Please describe the specifics of the code enforcement concern selected above" />
                    </h:outputLabel>
                    <p:inputTextarea 
                        id="describeConcern" 
                        styleClass="textArea" 
                        rows="6" 
                        required="true" 
                        style="width: 100%;"
                        value="#{actionRequestBean.form_requestDescription}"
                        />
                    <h:message for="describeConcern" showDetail="true" showSummary="true" 
                               warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />

                     <h:outputLabel for="dateOfRecord" >
                            <h:outputText styleClass="uiLabel" value="If different from today, select the date of the violation" />
                    </h:outputLabel>
                    
                    <p:calendar value="#{actionRequestBean.form_dateOfRecord}" 
                                mode="popup"
                                maxdate="#{actionRequestBean.form_dateOfRecord}"
                                id="dateOfRecord"
                                showOn="button"
                                pattern="EEE, dd MMM, yyyy"
                                navigator="true"
                                showButtonPanel="true"
                                showTodayButton="true"/>
                    
                    <h:message for="dateOfRecord" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                        
                    
                    
                    
                    <p>Check this box if your concern is time-sensitive in nature</p>
                    <h:outputLabel for="urgent" >
                            <h:outputText styleClass="uiLabel" value="Urgent issue" />
                    </h:outputLabel>
                    <h:selectBooleanCheckbox id="urgent" styleClass="selectBooleanCheckbox"/> 
                    
                    
                                    
                    <hr />
                    
                    <h3>Section 2: Requestor Contact Information</h3>
            
                    <h:outputLabel for="requestorType" >
                        <h:outputText styleClass="uiLabel" value="Select the most appropriate category / role    " />
                    </h:outputLabel>
                    
                    <p:selectOneMenu 
                        id="requestorType" 
                        required="false"
                        value="#{actionRequestBean.submittingPersonType}">
                        
                        <f:selectItems 
                            value="#{actionRequestBean.submittingPersonTypes}"
                            var="p" 
                            itemValue="#{p}"
                            itemLabel="#{p.label}"/>
                        
                    </p:selectOneMenu>
                    <h:message for="requestorType" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                        
                    
                    
                    
                    <h:outputLabel for="requestorFirstName" >
                        <h:outputText styleClass="uiLabel" value="Last Name" />
                    </h:outputLabel>
                    <h:inputText 
                        id="requestorFirstName" 
                        size="40" 
                        value="#{actionRequestBean.form_requestorFName}" 
                        styleClass="inputText" 
                        required="false"/>
                    <h:message for="requestorLastName" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                        
                    <h:outputLabel for="requestorLastName" >
                    <h:outputText styleClass="uiLabel" value="Last Name" />
                    </h:outputLabel>
                    <h:inputText id="requestorLastName" size="40" value="#{actionRequestBean.form_requestorLName}" styleClass="inputText" required="false"/>
                    <h:message for="requestorLastName" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />

                    <h:outputLabel for="requestorPhone" >
                        <h:outputText styleClass="uiLabel" value="Phone Number" />
                    </h:outputLabel>
                    <h:inputText id="requestorPhone" size="40" value="#{actionRequestBean.form_requestor_phoneCell}" styleClass="inputText" required="false"/>
                    <h:message for="requestorPhone" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />

                    <h:outputLabel for="requestorEmail" >
                        <h:outputText styleClass="uiLabel" value="Email (optional)" />
                    </h:outputLabel>
                    <h:inputText id="requestorEmail" size="40" value="${actionRequestBean.form_requestor_email}" styleClass="inputText" required="false"/>
                    <h:message for="requestorEmail" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                    <p class="note">If you enter your email address, you will receive automatically generated 
                        email notices of this request submission and email notices about major 
                        changes in your request status (there are about 3-4 status changes
                        over the life of most requests.)</p>
                    
                    <h:outputLabel for="requestorAddressStreet" >
                        <h:outputText styleClass="uiLabel" value="Street Address" />
                    </h:outputLabel>
                    <h:inputText id="requestorAddressStreet" size="40" value="#{actionRequestBean.form_requestor_addressStreet}" styleClass="inputText" required="false"/>
                    <h:message for="requestorAddressStreet" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />

                    <h:outputLabel for="requestorAddressCity" >
                        <h:outputText styleClass="uiLabel" value="City" />
                    </h:outputLabel>
                    <h:inputText id="requestorAddressCity" size="40" value="#{actionRequestBean.form_requestor_addressCity}" styleClass="inputText" required="false"/>
                    <h:message for="requestorAddressCity" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />

                    <h:outputLabel for="requestorAddressZip" >
                        <h:outputText styleClass="uiLabel" value="ZIP Code" />
                    </h:outputLabel>
                    <h:inputText id="requestorAddressZip" size="40" value="#{actionRequestBean.form_requestor_addressZip}" styleClass="inputText" required="false"/>
                    <h:message for="requestorAddressZip" showDetail="true" showSummary="true" 
                           warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                    
                    <h:outputLabel for="remainAnonymous" >
                        <h:outputText styleClass="uiLabel" value="I wish to remain anonymous" />
                    </h:outputLabel>
                    <h:selectBooleanCheckbox id="remainAnonymous" value="#{actionRequestBean.form_anonymous}" styleClass="selectBooleanCheckbox"/> 
                    
                    <div class="checkBoxLabel">
                        <span> Check this box if you prefer to not be named during the issue investigation</span>
                    </div>
                <br /><br />
                <hr />



                <h3>Submit Request</h3>
                    <h:commandButton 
                        id="submitRequest" 
                        value="Submit Code Enforcement Request" 
                        styleClass="buttonOwnLine"
                        action="#{actionRequestBean.submitActionRequest}"/>
                    
                    <p class="note">After successful form completion, you will be directed to a page listing your tracking number
                        and a summary of the information you submitted.</p>
                  </h:form>
            </f:view>
            <hr />
            <div><p class="footer">This system is mainted by the Turtle Creek Valley Council of Governments | (c) 2017</p></div>
            <br />
        </div>
    </h:body>
</html>

